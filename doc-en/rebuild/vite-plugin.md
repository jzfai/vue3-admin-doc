# 前言

本篇主要介绍vue3-admin使用的一些常用插件，带大家熟悉各插件的作用和如何配置使用



## unplugin-auto-import 插件集成

>导入api

unplugin-auto-import能帮助我们自动导入依赖，主动扫描依赖等，是一个非常好用的插件，强烈推荐

[unplugin-auto-import官方文档](https://www.npmjs.com/package/unplugin-auto-import)

#### 安装依赖

```shell
pnpm add unplugin-auto-import@0.11.4 -D
```

#### 配置

vite.config.js    plugins中配置

```javascript
//vite.config.js
AutoImport({
        imports: ["vue"],
        //配置后会自动扫描目录下的文件
        dirs: ["src/hooks/**"], //src/hooks/** 会递归查找hooks目录下的文件 export export default 进行导出
        eslintrc: {
          //生成eslint配置文件
          enabled: true, // Default `false`
          filepath: "./.eslintrc-auto-import.json", // Default `./.eslintrc-auto-import.json`
          globalsPropValue: true, // Default `true`, (true | false | 'readonly' | 'readable' | 'writable' | 'writeable')
        },
        dts: true, //自动生成 auto-imports.d.ts 文件
}),
```

>运行 npm run dev  会在项目根目录生成  auto-imports.d.ts， .eslintrc-auto-import.json文件

#### 使用

新建文件 src/hooks/useCommon.js

```javascript
const useCommonFunc = () => {
  let count = ref(0);
  const setCount = () => {
    count += 1000;
  };
  return {
    count,
    setCount,
  };
};
export const useCommon = useCommonFunc;
```

新建文件 src/hooks/global/useTest.js

```javascript
const hookFunc = () => {
  let count = ref(0);
  const setCount = () => {
    count += 1000;
  };
  return {
    count,
    setCount,
  };
};
export const useTest = hookFunc;
```



src/views/dashboard/index.vue 中使用

```vue
<template>
  <div>i am dashboard.vue</div>
  <div>{{ count }}</div>
</template>
<script setup>
const { count } = useCommon();
</script>
```



我们可以看下自动生成的 auto-imports.d.ts

```typescript
// Generated by 'unplugin-auto-import'
export {}
declare global {
  const useCommon: typeof import('./src/hooks/useCommon.js')['useCommon']
  const useTest: typeof import('./src/hooks/global/useTest.js')['useTest']
}
```

>可见 useCommon 和 useTest已经被扫描自动导入了





## unplugin-vue-components 插件集成

>自动导入组件

unplugin-auto-import能帮助我们自动导入依赖，主动扫描依赖等，是一个非常好用的插件，强烈推荐

[unplugin-vue-components官方文档](https://www.npmjs.com/package/unplugin-vue-components)

#### 安装依赖

```shell
pnpm add unplugin-vue-components@0.22.9 -D
```

#### 配置

新建 src/components/test/AutoImport.vue

```vue
<template>
  AutoImport.vue
</template>
```

新建 src/components/HelloWorld.vue

```vue
<template>
  HelloWorld.vue
</template>
```



配置 vite.config.js

```javascript
// vite.config.js plugins中
import AutoImport from "unplugin-auto-import/vite";
import Components from "unplugin-vue-components/vite";

Components({
        // relative paths to the directory to search for components.
        dirs: ["src/components"],
        // valid file extensions for components.
        extensions: ["vue"],
        // search for subdirectories
        deep: true,
        // resolvers for custom components
        resolvers: [],
        // generate `components.d.ts` global declarations,
        // also accepts a path for custom filename
        // default: `true` if package typescript is installed
        dts: true,
      })
```

##### 使用

src/views/dashboard/index.vue

```vue
<template>
  <HelloWorld />
</template>
```

我们可以看下自动生成的components.d.ts

```javascript
declare module '@vue/runtime-core' {
  export interface GlobalComponents {
    AutoImport: typeof import('./src/components/test/AutoImport.vue')['default']
    HelloWorld: typeof import('./src/components/HelloWorld.vue')['default']
  }
}
```

>可以看到 AutoImport  和  HelloWorld 组件已经被扫描，也就是说我们可以在组件中直接使用，无需引入



## unocss插件集成

集成了  [Windi CSS](http://windicss.org/), [Tailwind CSS](https://tailwindcss.com/), and [Twind](https://github.com/tw-in-js/twind)  功能， 但比其更强大， **强烈推荐**

[unocss官方文档](https://www.npmjs.com/package/unocss)

#### 安装依赖

```shell
pnpm add unocss@0.46.4  -D
```

#### 配置

vite.config.js    plugins中配置

```javascript
//vite.config.js    plugins
import UnoCSS from 'unocss/vite'
import { presetAttributify, presetIcons, presetUno } from 'unocss'

//plugins中
UnoCSS({
  presets: [presetUno(), presetAttributify(), presetIcons()]
})
```

>本篇中已经有svg-icon了，个人感觉svg-icon比presetIcons()好用



presetIcons Icon：图标预设

 presetAttributify： 属性化模式支持 

```vue
<div font="black">btn</div>
//css
[font-black]{
   font-weight:900
}
```

 presetUno： 工具类预设 

 默认的 `@unocss/preset-uno` 预设（**实验阶段**）是一系列流行的原子化框架的 **通用超集**，包括了 Tailwind CSS，Windi CSS，Bootstrap，Tachyons 等。 





main.js

```javascript
//import unocss
import 'uno.css'
```



此时unocss就可以使用了



[推荐学习篇](https://blog.csdn.net/qq1195566313/article/details/125650172)



##### 如何使用

```vue
<template>
  <div class="mt-10px pt-10px w-100px h-100px text-100px
              p-100px cursor-pointer font-500">
    unocss
  </div>
</template>
```

快捷键 对应 原css 获取处

 [UnoCSSInteractive](https://uno.antfu.me/) 



## vite-plugin-svg-icons 插件集成

vite-plugin-svg-icon主要用于将我们的svg图篇整合成一张精灵图，我们可以通过<svg/> 可以直接使用
注：svg图片可以从源码中获取

[vite-plugin-svg-icons官方文档](https://github.com/vbenjs/vite-plugin-svg-icons)

### 安装依赖

```javascript
pnpm add vite-plugin-svg-icons@2.0.1 -D
```

### 配置

新建文件 src/icons/common， src/icons/nav-bar ，并在common目录下放置一张demo.svg图片，

vite.config.js

```javascript
import { createSvgIconsPlugin } from 'vite-plugin-svg-icons'

//plugins中
plugins: [
    createSvgIconsPlugin({
        //将src/icons/common和src/icons/nav-bar下的svg图片加入到配置中
        iconDirs: [path.resolve(process.cwd(), 'src/icons/common'), path.resolve(process.cwd(), 'src/icons/nav-bar')],
        // appoint svg icon using mode
        symbolId: 'icon-[dir]-[name]'
      })
 ]
```




新建文件src/icons/SvgIcon.vue

```vue
<template>
  <svg :class="svgClass" aria-hidden="true">
    <use :xlink:href="iconName" />
  </svg>
</template>

<script>
import { computed, defineComponent } from 'vue'
export default defineComponent({
  props: {
    iconClass: {
      type: String,
      required: true
    },
    className: {
      type: String,
      default: ''
    }
  },
  setup(props) {
    return {
      //拼接出入的svg文件名到iconName
      iconName: computed(() => `#icon-${props.iconClass}`),
      //将传入的class拼接到svgClass上
      svgClass: computed(() => {
        if (props.className) {
          return `svg-icon ${props.className}`
        }
        return 'svg-icon'
      })
    }
  }
})
</script>
```

main.js中引入

```javascript
//import svg-icon
import "virtual:svg-icons-register";
import SvgIcon from '@/icons/svg-icon.vue'
app.component('SvgIcon', SvgIcon)
```

此时svg-icon配置完了

#### 如何使用

```vue
<template>
  <!-- svg-icon -->
  <svg-icon icon-class="demo" class="w-100px h-100px text-#ff9901" />
</template>
```



>通过svg-icon你可以随意修改图标的大小和颜色，而且不会放大失真
>图标获取路径：可以从ui稿中或icon-font中直接下载svg图放在指定目录下



## vite-plugin-mkcert 集成



#### 什么时候应该使用该插件

1. 当你希望使用 `http/2` 解决 vite http dev server 请求的并发限制时，却发现浏览器缓存无效的情况 [#2725](https://github.com/vitejs/vite/issues/2725)。
2. 有强迫症，希望浏览器不要出现烦人的 https 证书错误。

[vite-plugin-mkcert官方文档](https://www.npmjs.com/package/vite-plugin-mkcert)



#### 安装依赖

```javascript
pnpm add vite-plugin-mkcert@1.10.1 -D
```

##### 配置

vite.config.js

```javascript
import mkcert from "vite-plugin-mkcert";
server:{
   https: true //serve中要设置https为true
}
//plugins中
plugins: [
    mkcert()
]
```

#### 使用

运行 npm run dev 查看效果 

>注：首次启动可能会比较慢请耐心等待





## unplugin-vue-define-options

 在 `` 中可使用 `defineOptions` 宏，以便在 `` 中使用 Options API。 尤其是能够在一个函数中设置 `name`、`props`、`emit` 和 `render` 属性。 

[unplugin-vue-define-options官方文档](https://www.npmjs.com/package/unplugin-vue-define-options)



#### 安装依赖

```shell
pnpm add unplugin-vue-define-options@0.12.7 -D
```

##### 配置

vite.config.js

```javascript
import DefineOptions from 'unplugin-vue-define-options/vite'
//plugins中
plugins: [
  DefineOptions()
],
```

#### 使用

```vue
<script setup lang="ts">
 import { useSlots } from 'vue'
  defineOptions({
    name: 'Foo',
  })
 const slots = useSlots()  
</script>
//输出代码
<script lang="ts">
export default {
  name: 'Foo',
}
</script>
<script setup>
import { useSlots } from 'vue'  
const slots = useSlots()
</script>
```



##  @vitejs/plugin-vue-jsx 插件集成

如果想在vue3中使用jsx语法，需要安装此插件

#### 安装依赖

```shell
pnpm add @vitejs/plugin-vue-jsx@2.1.0
```

##### 配置

vite.config.js

```javascript
import vueJsx from '@vitejs/plugin-vue-jsx'
//plugins中
plugins: [
 vueJsx()
],
```

##### 使用

```vue
import { defineComponent } from 'vue'
export default defineComponent({
  setup() {
    const route = useRoute()
    const router = useRouter()
    onBeforeMount(() => {
      const { params, query } = route
      const { path } = params
      router.replace({ path: `/${path}`, query })
    })
    return () => <div> </div>
  }
})
```




